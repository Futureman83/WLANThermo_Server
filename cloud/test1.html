<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Titel</title>
  </head>
  <body>


<script>
 function loadJSON(url, data, timeout, callback) {
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('POST', url, true);
        xobj.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
		xobj.timeout = timeout;
        xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                // .open will NOT return a value but simply returns undefined in async mode so use a callback
                callback(xobj.responseText);
            }
        }
		xobj.ontimeout = function (e) {

		};
        xobj.send(data);
    }
	
	function setThingspeak(){
		var data = '{"device": {"device": "nano","serial": "8250a6","hw_version": "v1","sw_version": "v0.9.12"},"update": {"available": true,"version": "v0.9.12"},"alexa": {"task": "delete","token": "test1"},"notification": {"task": "alert","channel": 1,"message": "down","lang": "de","temp": [80,81.2],"unit": "C","services": [{"service": "telegram","key1": "344407734:AAGEdm9gxoFDfuXKUL6HynxDopYrdIYkMPc","key2": "399660681"}]}}';
		console.log('Test');
		loadJSON('https://api.wlanthermo.de/index.php', data, '60000', function (response) {
			console.log('Test');
			console.log(response);
		})		
	}
	setThingspeak();
</script>
  </body>
</html>